# Gu√≠a de Documentaci√≥n por Ramas

## üìö Filosof√≠a de Documentaci√≥n

> "La documentaci√≥n desactualizada es peor que no tener documentaci√≥n"

En este proyecto, la documentaci√≥n **SIEMPRE** debe estar sincronizada con el c√≥digo. Cada rama tiene su prop√≥sito y su nivel de documentaci√≥n correspondiente.

---

## üå≥ Documentaci√≥n por Rama

### 1. Rama `main` (Producci√≥n)

#### üéØ Prop√≥sito
Documentaci√≥n oficial y estable que refleja exactamente lo que est√° en producci√≥n.

#### üìÑ Archivos Obligatorios

```
agente-cv/
‚îú‚îÄ‚îÄ README.md                          # ‚≠ê Informaci√≥n principal
‚îú‚îÄ‚îÄ CHANGELOG.md                       # üìù Historial de versiones
‚îú‚îÄ‚îÄ LICENSE                            # üìú Licencia del proyecto
‚îú‚îÄ‚îÄ CODE_OF_CONDUCT.md                 # ü§ù C√≥digo de conducta
‚îú‚îÄ‚îÄ CONTRIBUTING.md                    # üë• Gu√≠a de contribuci√≥n
‚îú‚îÄ‚îÄ SECURITY.md                        # üîí Pol√≠tica de seguridad
‚îú‚îÄ‚îÄ SUPPORT.md                         # üí¨ Informaci√≥n de soporte
‚îú‚îÄ‚îÄ GIT_WORKFLOW.md                    # üîÑ Estrategia de ramas
‚îÇ
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ README.md                      # √çndice de documentaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ INSTALLATION.md                # Gu√≠a de instalaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ DEPLOYMENT.md                  # Gu√≠a de despliegue
‚îÇ   ‚îú‚îÄ‚îÄ API_REFERENCE.md               # Referencia de API
‚îÇ   ‚îú‚îÄ‚îÄ USER_GUIDE.md                  # Manual de usuario
‚îÇ   ‚îú‚îÄ‚îÄ FAQ.md                         # Preguntas frecuentes
‚îÇ   ‚îú‚îÄ‚îÄ TROUBLESHOOTING.md             # Soluci√≥n de problemas
‚îÇ   ‚îî‚îÄ‚îÄ ARCHITECTURE.md                # Documentaci√≥n arquitect√≥nica
‚îÇ
‚îú‚îÄ‚îÄ ARQUITECTURA_SOFTWARE.md           # Arquitectura de software
‚îú‚îÄ‚îÄ ARQUITECTURA_DATOS.md              # Arquitectura de datos
‚îú‚îÄ‚îÄ ARQUITECTURA_PROMPTS.md            # Arquitectura de prompts
‚îú‚îÄ‚îÄ ARQUITECTURA_SOLUCION.md           # Arquitectura de soluci√≥n
‚îÇ
‚îú‚îÄ‚îÄ README_DOCKER.md                   # Documentaci√≥n Docker
‚îú‚îÄ‚îÄ DOCKER_*.md                        # Gu√≠as Docker espec√≠ficas
‚îÇ
‚îî‚îÄ‚îÄ examples/
    ‚îî‚îÄ‚îÄ README.md                      # Documentaci√≥n de ejemplos
```

#### ‚úÖ Requisitos
- **Versi√≥n documentada**: Debe coincidir con el tag de release
- **Sin WIP**: No debe haber menciones a "trabajo en progreso"
- **Links validados**: Todos los enlaces internos deben funcionar
- **Ejemplos probados**: Todos los ejemplos de c√≥digo deben funcionar
- **Screenshots actualizados**: Las im√°genes deben reflejar la UI actual

#### üîÑ Actualizaci√≥n
- Se actualiza **SOLO** cuando se hace merge desde `staging`
- Cada merge debe incluir actualizaci√≥n de CHANGELOG.md
- Se crea un tag de versi√≥n despu√©s de cada merge

---

### 2. Rama `staging` (QA/Pre-producci√≥n)

#### üéØ Prop√≥sito
Documentaci√≥n lista para producci√≥n, en fase de validaci√≥n final.

#### üìÑ Archivos
Mismos que `main`, m√°s:

```
docs/
‚îú‚îÄ‚îÄ QA_CHECKLIST.md                    # Checklist de QA
‚îú‚îÄ‚îÄ TESTING_GUIDE.md                   # Gu√≠a de pruebas
‚îî‚îÄ‚îÄ RELEASE_NOTES_DRAFT.md             # Borrador de release notes
```

#### ‚úÖ Requisitos
- **Candidato a producci√≥n**: Debe estar completa y revisada
- **QA Sign-off**: Debe pasar revisi√≥n de QA
- **No breaking changes sin documentar**: Cualquier cambio mayor debe estar documentado
- **Migraci√≥n documentada**: Si hay cambios de esquema, deben estar documentados

#### üîÑ Actualizaci√≥n
- Se actualiza cuando se hace merge desde `develop`
- QA revisa y valida la documentaci√≥n
- Se pueden hacer ajustes menores antes de merge a `main`

---

### 3. Rama `develop` (Desarrollo)

#### üéØ Prop√≥sito
Documentaci√≥n activa que puede incluir features en desarrollo.

#### üìÑ Archivos
Todos los anteriores, m√°s:

```
docs/
‚îú‚îÄ‚îÄ ROADMAP.md                         # üó∫Ô∏è Roadmap de desarrollo
‚îú‚îÄ‚îÄ WIP_FEATURES.md                    # üöß Features en progreso
‚îú‚îÄ‚îÄ TECHNICAL_DECISIONS.md             # üí° Decisiones t√©cnicas
‚îú‚îÄ‚îÄ DEVELOPMENT_NOTES.md               # üìì Notas de desarrollo
‚îú‚îÄ‚îÄ EXPERIMENTAL.md                    # üß™ Features experimentales
‚îî‚îÄ‚îÄ TODO.md                            # ‚úîÔ∏è Lista de tareas pendientes
```

#### ‚úÖ Requisitos
- **Puede ser incompleta**: Est√° bien tener TODOs
- **Marca WIP**: Indica claramente qu√© est√° en progreso
- **Actualizaci√≥n frecuente**: Se actualiza con cada feature completada
- **Enlaces a PRs**: Puede referenciar PRs abiertos

#### üîÑ Actualizaci√≥n
- Se actualiza con cada merge de feature branch
- Los developers actualizan al completar features
- Se limpia antes de merge a `staging`

---

### 4. Ramas `feature/*` (Caracter√≠sticas)

#### üéØ Prop√≥sito
Documentaci√≥n espec√≠fica de la feature en desarrollo.

#### üìÑ Archivos
Pueden incluir:

```
docs/
‚îî‚îÄ‚îÄ features/
    ‚îî‚îÄ‚îÄ nombre-feature/
        ‚îú‚îÄ‚îÄ SPEC.md                    # Especificaci√≥n
        ‚îú‚îÄ‚îÄ IMPLEMENTATION.md          # Detalles de implementaci√≥n
        ‚îú‚îÄ‚îÄ TESTING.md                 # Plan de pruebas
        ‚îî‚îÄ‚îÄ EXAMPLES.md                # Ejemplos de uso
```

#### ‚úÖ Requisitos
- **Enfocada**: Solo documenta la feature espec√≠fica
- **Temporal**: Se mergea o elimina
- **Actualiza docs principales**: Al completar, actualizar README, etc.

#### üîÑ Actualizaci√≥n
- Se crea al inicio de la feature
- Se actualiza durante el desarrollo
- Se integra a `develop` al completar

---

### 5. Ramas `hotfix/*` (Correcciones)

#### üéØ Prop√≥sito
Documentaci√≥n de correcciones urgentes.

#### üìÑ Archivos
Actualizar:

```
CHANGELOG.md                           # A√±adir entrada de hotfix
docs/TROUBLESHOOTING.md                # Si el bug era com√∫n
README.md                              # Si afecta instalaci√≥n/uso
```

#### ‚úÖ Requisitos
- **M√≠nima pero precisa**: Documenta el fix sin excesos
- **Update CHANGELOG**: Siempre actualizar el changelog
- **Sync a develop**: Debe mergearse tambi√©n a develop

---

## üìã Checklist de Documentaci√≥n por Tipo de Cambio

### ‚ú® Nueva Feature

```markdown
- [ ] Actualizar README.md (secci√≥n de features)
- [ ] A√±adir ejemplos en examples/
- [ ] Actualizar API_REFERENCE.md si hay nuevos endpoints
- [ ] A√±adir tests documentados
- [ ] Actualizar CHANGELOG.md
- [ ] Crear docs/features/ si es compleja
- [ ] Actualizar ROADMAP.md (marcar como completada)
- [ ] Screenshots/GIFs si hay UI nueva
```

### üêõ Bug Fix

```markdown
- [ ] Actualizar CHANGELOG.md
- [ ] A√±adir a TROUBLESHOOTING.md si era com√∫n
- [ ] Actualizar FAQ.md si generaba preguntas
- [ ] Documentar el fix en el commit message
```

### üìö Cambio Solo de Documentaci√≥n

```markdown
- [ ] Verificar que no hay typos
- [ ] Validar todos los enlaces
- [ ] Probar ejemplos de c√≥digo
- [ ] Actualizar fecha de √∫ltima modificaci√≥n
- [ ] Incrementar versi√≥n del doc si es mayor
```

### üèóÔ∏è Refactor

```markdown
- [ ] Actualizar diagramas de arquitectura
- [ ] Actualizar ARCHITECTURE.md
- [ ] Documentar razones en TECHNICAL_DECISIONS.md
- [ ] Actualizar comentarios en c√≥digo
- [ ] Actualizar gu√≠as de desarrollo
```

### üí• Breaking Change

```markdown
- [ ] ‚ö†Ô∏è CHANGELOG.md con warning prominente
- [ ] Documentar migraci√≥n paso a paso
- [ ] Actualizar ejemplos antiguos
- [ ] Crear gu√≠a de migraci√≥n espec√≠fica
- [ ] Actualizar versi√≥n MAJOR
- [ ] Avisar en README.md
- [ ] Deprecation notices si aplica
```

---

## üîß Herramientas y Scripts

### Script de Validaci√≥n de Docs

Crea: `scripts/validate_docs.py`

```python
#!/usr/bin/env python3
"""
Valida que la documentaci√≥n est√© sincronizada
"""
import os
import re
from pathlib import Path

def check_required_files(branch):
    """Verifica archivos obligatorios por rama"""
    required = {
        'main': [
            'README.md', 'CHANGELOG.md', 'LICENSE',
            'CONTRIBUTING.md', 'SECURITY.md'
        ],
        'staging': [
            'docs/QA_CHECKLIST.md', 'docs/TESTING_GUIDE.md'
        ],
        'develop': [
            'docs/ROADMAP.md', 'docs/WIP_FEATURES.md'
        ]
    }
    
    # Implementar l√≥gica de validaci√≥n
    pass

def check_broken_links():
    """Verifica enlaces rotos en Markdown"""
    pass

def check_code_examples():
    """Verifica que ejemplos de c√≥digo funcionen"""
    pass

if __name__ == '__main__':
    # Ejecutar validaciones
    pass
```

### Pre-commit Hook

Crea: `.git/hooks/pre-commit`

```bash
#!/bin/bash
# Valida documentaci√≥n antes de commit

echo "üîç Validando documentaci√≥n..."

# Verificar que CHANGELOG est√© actualizado
if git diff --cached --name-only | grep -qE "agent/|api/|rag/"; then
    if ! git diff --cached --name-only | grep -q "CHANGELOG.md"; then
        echo "‚ö†Ô∏è  Cambios en c√≥digo pero no en CHANGELOG.md"
        echo "   Por favor actualiza el CHANGELOG"
        exit 1
    fi
fi

# Verificar links en archivos .md modificados
for file in $(git diff --cached --name-only | grep ".md$"); do
    echo "Verificando enlaces en $file..."
    # Implementar verificaci√≥n de enlaces
done

echo "‚úÖ Validaci√≥n de documentaci√≥n completa"
```

---

## üìê Plantillas de Documentaci√≥n

### Template: Nueva Feature

```markdown
# Feature: [Nombre]

## üìã Descripci√≥n
[Descripci√≥n concisa de la feature]

## üéØ Objetivos
- Objetivo 1
- Objetivo 2

## üí° Motivaci√≥n
[Por qu√© se implement√≥ esta feature]

## üöÄ Uso

### Instalaci√≥n
\```bash
# Comandos de instalaci√≥n
\```

### Ejemplo B√°sico
\```python
# C√≥digo de ejemplo
\```

### Ejemplo Avanzado
\```python
# C√≥digo avanzado
\```

## ‚öôÔ∏è Configuraci√≥n

| Par√°metro | Tipo | Default | Descripci√≥n |
|-----------|------|---------|-------------|
| param1    | str  | "default" | Descripci√≥n |

## üîó API Reference

### Funci√≥n principal
\```python
def feature_function(param1: str, param2: int) -> Result:
    """
    Descripci√≥n de la funci√≥n
    
    Args:
        param1: Descripci√≥n
        param2: Descripci√≥n
    
    Returns:
        Result: Descripci√≥n del resultado
        
    Raises:
        ValueError: Cuando...
    """
\```

## üß™ Testing

### Tests Incluidos
- Test 1: Descripci√≥n
- Test 2: Descripci√≥n

### Ejecutar Tests
\```bash
pytest tests/test_feature.py
\```

## ‚ö†Ô∏è Limitaciones Conocidas
- Limitaci√≥n 1
- Limitaci√≥n 2

## üîÆ Futuras Mejoras
- [ ] Mejora 1
- [ ] Mejora 2

## üìö Referencias
- [Link 1](url)
- [Link 2](url)

---
**Autor**: @username
**Fecha**: YYYY-MM-DD
**Versi√≥n**: v1.0.0
```

---

## üîÑ Workflow de Documentaci√≥n

### Diagrama de Flujo

```
[Feature Branch]
    ‚îÇ
    ‚îú‚îÄ> Crear docs/features/
    ‚îú‚îÄ> Documentar durante desarrollo
    ‚îú‚îÄ> Actualizar ejemplos
    ‚îÇ
    ‚Üì PR Review
    ‚îÇ
[Develop]
    ‚îÇ
    ‚îú‚îÄ> Integrar docs de feature
    ‚îú‚îÄ> Actualizar README
    ‚îú‚îÄ> Actualizar ROADMAP
    ‚îÇ
    ‚Üì Ready for QA
    ‚îÇ
[Staging]
    ‚îÇ
    ‚îú‚îÄ> Validar documentaci√≥n
    ‚îú‚îÄ> Crear release notes draft
    ‚îú‚îÄ> QA review de docs
    ‚îÇ
    ‚Üì QA Approved
    ‚îÇ
[Main]
    ‚îÇ
    ‚îú‚îÄ> Finalizar CHANGELOG
    ‚îú‚îÄ> Publicar release notes
    ‚îú‚îÄ> Tag de versi√≥n
    ‚îî‚îÄ> üéâ Documentation Released!
```

---

## üé® Mejores Pr√°cticas

### ‚úÖ DO (Hacer)

1. **Actualizar docs con el c√≥digo**: En el mismo commit o PR
2. **Usar ejemplos funcionales**: C√≥digo que realmente funcione
3. **Incluir screenshots**: Una imagen vale m√°s que mil palabras
4. **Versionar la documentaci√≥n**: Indicar para qu√© versi√≥n es v√°lida
5. **Links relativos**: Usar paths relativos para links internos
6. **√çndices claros**: Tabla de contenidos en docs largas
7. **Formato consistente**: Seguir el estilo del proyecto
8. **Actualizar CHANGELOG**: Con cada cambio significativo

### ‚ùå DON'T (No Hacer)

1. **No dejar TODOs en main**: Limpialo antes de mergear
2. **No copiar docs desactualizadas**: Mejor actualizarlas
3. **No hardcodear URLs**: Usar variables o config
4. **No duplicar informaci√≥n**: Usar referencias
5. **No asumir conocimiento**: Explicar conceptos
6. **No ignorar typos**: Revisar ortograf√≠a
7. **No omitir prerequisitos**: Listar dependencias
8. **No documentar c√≥digo obvio**: Enf√≥cate en lo complejo

---

## üìä M√©tricas de Documentaci√≥n

### Indicadores de Calidad

- ‚úÖ **Cobertura**: % de funciones documentadas
- ‚úÖ **Actualizaci√≥n**: Tiempo desde √∫ltimo cambio de c√≥digo
- ‚úÖ **Ejemplos**: N√∫mero de ejemplos funcionales
- ‚úÖ **Links**: % de links funcionales
- ‚úÖ **Feedback**: Issues relacionadas con docs

### Herramienta de M√©tricas

```bash
# Contar funciones documentadas
find . -name "*.py" -exec grep -l "\"\"\"" {} \; | wc -l

# Verificar antiguedad de docs
ls -lt docs/*.md | head -10

# Contar ejemplos
find examples/ -name "*.py" | wc -l
```

---

## üÜò FAQs de Documentaci√≥n

### P: ¬øCu√°ndo actualizar la documentaci√≥n?
**R**: Siempre con el c√≥digo, en el mismo PR.

### P: ¬øQu√© pasa si olvido actualizar docs?
**R**: El revisor rechazar√° el PR. Es un requisito.

### P: ¬øD√≥nde documento features experimentales?
**R**: En `develop`, en `docs/EXPERIMENTAL.md`

### P: ¬øC√≥mo documento breaking changes?
**R**: CHANGELOG con warning, gu√≠a de migraci√≥n, y update en README.

### P: ¬øNecesito documentar cada funci√≥n?
**R**: Funciones p√∫blicas s√≠, privadas opcionalmente.

### P: ¬øPuedo usar espa√±ol en docs internas?
**R**: S√≠, pero README y docs p√∫blicas en ingl√©s es recomendado.

---

## üìû Contacto

¬øDudas sobre documentaci√≥n? Abre un issue con el label `documentation`.

---

**√öltima actualizaci√≥n**: 2025-10-06
**Mantenido por**: Tech Lead Team
